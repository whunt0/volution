"use strict";

import React from 'react';
import itemStyle from '../styles/item.css';
import CO from 'co';
import PropTypes from 'prop-types';
import _ from 'lodash';
import { connect } from 'react-redux';
import { SET_TRANSPORTATION } from '../actions/planet';

class TransportationInput extends React.Component {
    handleChange(e){
        this.props.selectTransportation(this.props.name);
        console.log("Handling input change");
    }
    render(){
        let TransportationDivs = [];
        let tKeys = _.keys(this.props.TransportationData);
        for(let i = 0; i < tKeys.length; ++i){
            //let isSelected = _.indexOf(this.props.SelectedTransportation, transportationNames[i]) != -1 ? "selected" : "";
            TransportationDivs.push(<div onClick = {()=> this.handleChange()}>
                <img src={this.props.TransportationData[tKeys[i]].src}/>
                <div>
                    niggers
                    {tKeys[i]}
                </div>
                <div>
                    {this.props.TransportationData[tKeys[i]].speed}
                </div>
            </div>);
        }

        return ( 
            <div>
                {TransportationDivs}
            </div>
        );
    }
}

TransportationInput.propTypes = {
    selectTransportation : PropTypes.func,
    SelectedTransportation : PropTypes.string,
    TransportationData : PropTypes.object,
    name : PropTypes.string,
    src : PropTypes.string,
    speed : PropTypes.string
};


const mapStateToProps = (state, props) => {
    return { 
        "SelectedTransportation" : state.PlanetWidget.SelectedTransportation,
        "TransportationData" : state.PlanetWidget.TransportationData
    };

};

const mapDispatchToProps = (dispatch, props) => {
    return {
        "selectTransportation" : (transportation) => dispatch(SET_TRANSPORTATION(transportation))
    };
};

const ConnectedTransportationInput = connect(mapStateToProps, mapDispatchToProps)(TransportationInput);

export { ConnectedTransportationInput};
